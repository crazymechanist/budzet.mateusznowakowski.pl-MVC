{% extends "base.html" %}

{% block title %}Item show{% endblock %}

{% block body %}

<h1 class="d-none">Item show</h1>


<form method="get" action="/item/show" id="formItem">
	<div class="col-12">
		<label for="inputAmount">Search</label>
		<input id="inputAmount" name="search" type="text" class="form-control" value="{{ filters.search}}"/>
	</div>
	<div class="row">
		<div class="col">
			<label for="inputAmount">Min amount [PLN]:</label>
			<input id="inputAmount" name="min" type="number" step="0.01" min="0" class="form-control"  value="{{ filters.min}}" />
		</div>
		<div class="col">
			<label for="inputAmount">Max amount [PLN]:</label>
			<input id="inputAmount" name="max" type="number" step="0.01" min="0" class="form-control"  value="{{ filters.max}}" />
		</div>
		<div class="col-xl-4 col-0">
		</div>
		<div class="col">
			<label for="inputDate">Start date:</label>
			<input type="date"  id="sDate" name="sDate" class="form-control" value="{{ filters.sDate}}" />
		</div>
		<div class="col">
			<label for="inputDate">End date:</label>
			<input type="date"  id="eDate" name="eDate" class="form-control" value="{{ filters.eDate}}" />
		</div>
	</div>
	<div class="row my-2">
		<div class="col-1">
		</div>
		<div class="col-2">
			<label for="sort">Sort:</label>
		</div>
		<div class="col-9">
			<select name="sort" id="sort" class="form-control">
				{% if filters.sort is not empty %}<option value="{{ filters.sort }}"> {{ filters.sortDescTypes[filters.sort] }} </option>{% endif %}
				{% for short in filters.sortShortTypes %}
				{% if  filters.sort  != short %}
				<option value="{{ short }}"> {{ filters.sortDescTypes[short] }} </option>
				{% endif %}
				{% endfor %}
			</select>
		</div>
	</div>
	<div class="row my-2">
		<div class="col-1">
		</div>
		<div class="col-2">
			<label for="page">Items:</label>
		</div>
		<div class="col-9">
			<select name="page" id="page" class="form-control">
				{% if filters.page is not empty %}<option value="{{ filters.page }}"> {{ (filters.page-1)*20+1 }}-{{ filters.page*20 }} </option>{% endif %}
				{% for i in 1..pages %}
				{% if  i  != filters.page %}
				<option value="{{ i }}">	{{ (i-1)*20+1 }}-{{ i*20 }}	</option>
				{% endif %}
				{% endfor %}
			</select>
		</div>
	</div>
	<div class="row justify-content-end">
		<div class="col-3">
			<button type="submit" class="btn btn-outline-dark col-12">Go</button>
		</div>
		<div class="col-3">
			<a class="col-12 btn btn-dark" href="\item\show?page={{ filters.page }}&sort={{ filters.sort }}" >Clear</a>
		</div>
	</div>
	
</form>


<div class="row">
	<div class="col-6 list-group w-auto my-2">
		{% if moneyFlows is not empty %}
		{% for moneyFlow in moneyFlows %}
		<div class="col-12 list-group-item list-group-item-action " aria-current="true">
			<div class="row d-flex">
				<div class="col-2">
					<svg class="bi d-block {{ moneyFlow.type }}" width="32" height="32"><use xlink:href="#graph-down-arrow"/></svg>
				</div>
				<div class="col-6 col-sm-7">
					<h6 class="mb-0">{{ moneyFlow.name }}</h6>
					<p class="mb-0 opacity-75">Category: {{ moneyFlow.category }}</p>
					<p class="mb-0 opacity-75">Amount: {{ moneyFlow.amount }} PLN</p>
					<p class="mb-0 opacity-75">Description</p>
					
				</div>
				<div class="col-4 col-sm-3">
					<small class="opacity-50 text-nowrap">{{ moneyFlow.date }}</small>
					<div>
						<form method="get" action="/item/edit" id="formItem">
							<input type="hidden" id="id" name="id" value="{{ moneyFlow.id }}">
							<button type="submit" class="btn btn-default my-1 mx-3"><svg class="bi d-block my-1 flex-shrink-0" width="20" height="20"><use xlink:href="#edit"/></svg></button>
						</form>
						<form method="get" action="/item/confirm-delete" id="formItem">
							<input type="hidden" id="id" name="id" value="{{ moneyFlow.id }}">
						<button type="submit" class="btn btn-default my-1 mx-3"><svg class="bi d-block my-1 flex-shrink-0" width="20" height="20"><use xlink:href="#trash"/></svg></button>
						</form>
						</div>
					</div>
					
					</div>
				</div>
		{% endfor %}
		{% endif %}
	</div>
	
	
</div>

{% endblock %}
